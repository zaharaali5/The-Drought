<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shows - The Drought</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="shows.html" class="nav-link active">Shows</a></li>
                <li><a href="contact.html" class="nav-link">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Shows Section -->
    <section class="content">
        <div class="container">
            <div class="shows-container">
                <h1>Upcoming Shows</h1>
                <div id="shows-list"></div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 The Drought. All rights reserved.</p>
        </div>
    </footer>

    <script>
        function toggleMenu() {
            const navMenu = document.getElementById('navMenu');
            navMenu.classList.toggle('active');
        }

        // Fetch and display shows from Bandsintown API
        async function loadShows() {
            const artistName = 'The Drought';
            const appId = '48e282231194a007df9d92c90ff18298';
            const apiUrl = `https://rest.bandsintown.com/artists/${encodeURIComponent(artistName)}/events?app_id=${appId}`;

            try {
                const response = await fetch(apiUrl);

                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }

                const shows = await response.json();

                const showsList = document.getElementById('shows-list');

                if (!Array.isArray(shows) || shows.length === 0) {
                    showsList.innerHTML = '<p style="text-align: center; color: var(--text-secondary);">No upcoming shows at this time. Check back soon!</p>';
                    return;
                }

                let showsHtml = '<div class="shows-grid">';

                shows.forEach(show => {
                    const eventDate = new Date(show.datetime);
                    const formattedDate = eventDate.toLocaleDateString('en-US', { 
                        month: 'short', 
                        day: 'numeric', 
                        year: 'numeric' 
                    });
                    const formattedTime = eventDate.toLocaleTimeString('en-US', { 
                        hour: 'numeric', 
                        minute: '2-digit',
                        hour12: true 
                    });

                    const venue = show.venue.name;
                    const city = show.venue.city;
                    const region = show.venue.region;
                    const location = `${city}${region ? ', ' + region : ''}`;

                    showsHtml += `
                        <div class="show-card">
                            <div class="show-date">
                                <div class="date-day">${eventDate.getDate()}</div>
                                <div class="date-month">${eventDate.toLocaleDateString('en-US', { month: 'short' })}</div>
                            </div>
                            <div class="show-details">
                                <h3>${venue}</h3>
                                <p class="show-location">${location}</p>
                                <p class="show-time">${formattedTime}</p>
                                <a href="${show.url}" target="_blank" class="show-link">Get Tickets</a>
                            </div>
                        </div>
                    `;
                });

                showsHtml += '</div>';
                showsList.innerHTML = showsHtml;
            } catch (error) {
                console.error('Error fetching shows:', error);
                document.getElementById('shows-list').innerHTML = `<p style="text-align: center; color: var(--text-secondary);">Unable to load shows. Error: ${error.message}</p>`;
            }
        }

        // Load shows when page loads
        document.addEventListener('DOMContentLoaded', loadShows);
    </script>
</body>
</html>
